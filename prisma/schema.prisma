generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model admin {
  niku       String @id @db.VarChar(50)
  nama_admin String @db.VarChar(255)
  email      String @unique @db.VarChar(100)
  id_user    String @db.VarChar(50)
  user       user   @relation(fields: [id_user], references: [id_user], onDelete: Cascade)

  @@index([id_user], map: "admin_id_user_fkey")
}

model dosen {
  id_user         String  @id @db.VarChar(50)
  bidang_keahlian String? @db.VarChar(99)
  user            user    @relation(fields: [id_user], references: [id_user], onDelete: Cascade)

  @@index([id_user], map: "fk_user_dosen")
}

model evaluasi_sistem {
  id          String   @id @default(cuid()) @db.VarChar(50)
  fitur       Int
  konten      Int
  responsif   Int
  kemudahan   Int
  dokumentasi Int
  saran       String?
  kritik      String?
  createdAt   DateTime @default(now())
}

model jadwal_dosen {
  id_jadwal_dosen String   @id @db.VarChar(50)
  tanggal_mulai   DateTime @db.Date
  tanggal_selesai DateTime @db.Date
}

model jadwal_pendaftaran {
  id_jadwal      Int          @id @default(autoincrement())
  id_pendaftaran Int
  jam_mulai      DateTime     @db.Time(0)
  jam_selesai    DateTime     @db.Time(0)
  tanggal        DateTime      @db.Date
  dosen_penguji  String       @db.VarChar(99)
  id_kuota       String       @db.VarChar(50)
  kuota_semhas   kuota_semhas @relation(fields: [id_kuota], references: [id_kuota], onDelete: NoAction, onUpdate: NoAction, map: "fk_kuota_semhas_jadwal_pendaftaran")
  pendaftaran    pendaftaran  @relation(fields: [id_pendaftaran], references: [id_pendaftaran], onUpdate: Restrict, map: "fk_pendaftaran_jadwal_pendaftaran")

  @@index([id_kuota], map: "fk_kuota_semhas_jadwal_pendaftaran")
  @@index([id_pendaftaran], map: "fk_pendaftaran_jadwal_pendaftaran")
}

model kadep {
  nip_kadep  String @id @db.VarChar(50)
  nama_kadep String @db.VarChar(99)
  email      String @unique @db.VarChar(100)
  user       user   @relation(fields: [email], references: [email], map: "fk_user_kadep")

  @@index([email])
}

model kuota_semhas {
  id_kuota           String               @id @db.VarChar(50)
  kuota_max          Int
  batas_input        DateTime             @db.Time(0)
  jadwal_pendaftaran jadwal_pendaftaran[]
}

model nilai_semhas {
  status_semhas  String      @db.VarChar(50)
  komentar       String      @db.Text
  id_rubik       String      @id @db.VarChar(50)
  id_pendaftaran Int
  pendaftaran    pendaftaran @relation(fields: [id_pendaftaran], references: [id_pendaftaran], onUpdate: Restrict, map: "fk_pendaftaran_nilai_semhas")
  rubik          rubik       @relation(fields: [id_rubik], references: [id_rubik], onDelete: NoAction, onUpdate: NoAction, map: "fk_rubik_nilai_semhas")
  id_user        String      @db.VarChar(50)
  user           user        @relation(fields: [id_user], references: [id_user], onUpdate: Restrict, map: "fk_dosen_nilai_semhas")

  @@index([id_pendaftaran], map: "fk_pendaftaran_nilai_semhas")
  @@index([id_rubik], map: "fk_rubik_nilai_semhas")
  @@index([id_user], map: "fk_dosen_nilai_semhas")
}


model panduan {
  id_panduan     Int      @id @default(autoincrement())
  nama_file      String   @db.VarChar(255)
  tanggal_unggah DateTime @db.Date
  file           Bytes    @db.Blob
}

model pendaftaran {
  id_pendaftaran     Int                  @id @default(autoincrement())
  judul              String?              @db.VarChar(799)
  bidang_penelitian  String?              @db.VarChar(99)
  nama_dosen         String?              @db.VarChar(50)
  nama_laporan       String?              @db.VarChar(255)
  nama_krs           String?              @db.VarChar(255)
  nama_pengesahan    String?              @db.VarChar(255)
  nama_ppt           String?              @db.VarChar(255)
  id_periode         String?              @db.VarChar(50)
  id_user            String               @db.VarChar(50)
  status             String?              @db.VarChar(50)
  jadwal_pendaftaran jadwal_pendaftaran[]
  nilai_semhas       nilai_semhas[]
  periode_semhas     periode_semhas?      @relation(fields: [id_periode], references: [id_periode], onDelete: NoAction, onUpdate: NoAction)
  user               user                 @relation(fields: [id_user], references: [id_user], onDelete: Cascade)

  @@index([id_periode], map: "fk_periode_semhas_pendaftaran")
  @@index([id_user], map: "pendaftaran_id_user_fkey")
}

model periode_semhas {
  id_periode    String        @id @db.VarChar(50)
  semester      Int
  tanggal_buka  DateTime      @db.Date
  tanggal_tutup DateTime      @db.Date
  status        String        @db.VarChar(50)
  pendaftaran   pendaftaran[]
}

model rubik {
  id_rubik     String         @id @db.VarChar(50)
  kriteria     String         @db.VarChar(255)
  bobot        Int
  nilai_semhas nilai_semhas[]
}

model user {
  password     String        @db.VarChar(99)
  email        String        @id @db.VarChar(100)
  role         String        @db.VarChar(50)
  id_user      String?       @unique(map: "id_user") @db.VarChar(50)
  nama_lengkap String        @db.VarChar(99)
  admin        admin[]
  dosen        dosen?
  kadep        kadep?
  pendaftaran  pendaftaran[]
  nilai_semhas nilai_semhas[]
}
